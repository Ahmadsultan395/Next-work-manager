(()=>{var e={};e.id=761,e.ids=[761],e.modules={56037:e=>{"use strict";e.exports=require("mongoose")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},61355:(e,r,s)=>{"use strict";s.r(r),s.d(r,{patchFetch:()=>f,routeModule:()=>x,serverHooks:()=>w,workAsyncStorage:()=>y,workUnitAsyncStorage:()=>v});var t={};s.r(t),s.d(t,{POST:()=>m});var o=s(42706),n=s(28203),a=s(45994),i=s(4335),u=s(39187),c=s(58964),p=s.n(c),d=s(43008),l=s.n(d),g=s(97887);async function m(e){await (0,g.X)();try{let{email:r,password:s}=await e.json();console.log(r,s);let t=await i.K.findOne({email:r});if(console.log(t),null===t)return u.NextResponse.json({message:"User not found",success:!1},{status:404});if(!p().compareSync(s,t.password))return u.NextResponse.json({message:"Invalid password",success:!1},{status:401});let o=l().sign({_id:t.id,name:t.name},process.env.JWT_SECRET),n=u.NextResponse.json({message:"User Login succesfuly",status:200,user:t});return n.cookies.set("authToken",o,{httpOnly:!0,expiresIn:"1d"}),n}catch(e){return console.error("Error during login:",e),u.NextResponse.json({message:"server error",success:!1,error:e.message||e},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/login/route",pathname:"/api/login",filename:"route",bundlePath:"app/api/login/route"},resolvedPagePath:"F:\\nextjs\\net-work-manager\\src\\app\\api\\login\\route.js",nextConfigOutput:"",userland:t}),{workAsyncStorage:y,workUnitAsyncStorage:v,serverHooks:w}=x;function f(){return(0,a.patchFetch)({workAsyncStorage:y,workUnitAsyncStorage:v})}},96487:()=>{},78335:()=>{},97887:(e,r,s)=>{"use strict";s.d(r,{X:()=>n});var t=s(56037),o=s.n(t);let n=async()=>{try{if(o().connections[0].readyState){console.log(o().connections[0].readyState),console.log("Already connected to MongoDB");return}await o().connect(process.env.MONGO_DB_URL,{dbName:"work-manager"},{useNewUrlParser:!0,useUnifiedTopology:!0}),console.log("MongoDB connected")}catch(e){throw console.error("MongoDB connection error:",e),Error("Database connection failed")}};n()},4335:(e,r,s)=>{"use strict";s.d(r,{K:()=>a});var t=s(56037),o=s.n(t);let n=new(o()).Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0,match:/^[^\s@]+@[^\s@]+\.[^\s@]+$/},password:{type:String,required:!0},about:{type:String,required:!0},profileUrl:String},{timestamps:!0}),a=o().models.Users||o().model("Users",n)}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[638,452,8,964],()=>s(61355));module.exports=t})();